---
title: プロンプトエンジニアリング
permalink: prompt-engineering/
created: 2025-06-20T20:03:00
updated: 2025-06-20T20:03:00
tags:
  - AI
  - LLM
---
## メモ
- [Prompt Engineering Guide](https://www.promptingguide.ai/jp)
- [Text generation and prompting - OpenAI API](https://platform.openai.com/docs/guides/text?api-mode=responses)
- [プロンプト設計戦略  |  Gemini API  |  Google AI for Developers](https://ai.google.dev/gemini-api/docs/prompting-strategies?hl=ja)

## 基本
- QA形式だとモデルの回答は安定しやすい
	- ChatGPTなどでは、特にQA形式でなくても問題ない
```markdown
Q: {ここに質問を書く}
A:
```

- QA形式で連想される答えを誘導する
	- 以下のように質問に対する答えとして、A,Bを書いておくと、そこから連想されるCの答えを出してくれる
```makdown
Q: {ここに質問を書く}
A: {質問の答えの１つとなることを書く}
B: {質問の答えの１つとなることを書く}
C: 
```

- 指示と入力のフォーマットで指定する
	- Markdown形式などで、指示や入力を記載すると、読み取りやすくなる
	- ChatGPTなどは、区切り記号は何でも良いが、言語モデルによる
```
指示: {ここに指示}
入力: {ここに処理対象のテキスト}
出力:
```
```
### 指示
{ここに指示}
### 入力
{ここに処理対象のテキスト}
### 出力

```

- 出力フォーマット
	- 出力として指定すれば、だいたいその通りにやってくれる
		- ChatGPTなどにどんな形式で出力出来るかも聞ける
	- 例
		- 箇条書きやリスト形式
		- 表形式
		- CSV形式
		- JSON形式
		- `マークダウン形式で出力してください`

## コンポーネント（項目や要素）
- 指示、入力、出力、背景情報などのこと
- 例
	- 指示や質問
		- 指示
		- 質問
		- 目的
	- 入出力の指示
		- 入力
		- 出力例
		- 出力形式
		- テンプレート
		- 数値
	- 条件や制約
		- 制約
		- 条件
		- 前提
		- 例外
	- ヒントや補足情報
		- 背景情報
		- 参考資料
		- ヒント
		- キーワード
	- 手順やシナリオ
		- シナリオ
		- 手順
		- テストケース
	- 選択肢やオプション
		- 選択肢
		- オプション
		- チェックリスト

## テクニック

### 基本
- 批判的な視点でなどをいれると、そのとおりにやってくれる
- 例
	- 数値やデータを強調して
	- 批判的な視点で
	- 箇条書きで
	- 時系列に沿って
	- 比較しながら
	- 長所短所を個別に
	- 数値化して
	- 起承転結で
	- ロールプレイング

### Zero-shot/One-shot/Few-shotプロンプト
- 期待する動作になるように、出力のヒントなどをプロンプトで提示しておく
- Zero-shot
	- ヒントなし
- One-shot
	- ヒントが１つ
- Few-shot
	- ヒントが複数

### 思考の連鎖 - Chain-of-Thought(CoT)


### 自己整合性 - Self-Consistency


### MAGIシステム - MAGI-ToT

### 仮想スクリプトエンジン / PAL

### モックプロンプト - Mock Prompt


## パラメータ

### temperature
- 概要
	- 温度・気温を意味する英語だが、LLMだと多様性。・創造性・ランダム性などを指定する意味となる
	- 単語に対する確率分布を調整している
- 値の意味
	- temperature = 0.0
		- 決定的（deterministic）、最も確率の高い単語が常に選ばれる。
    - temperature = 0.7
	    - ほどよくランダム、自然で多様な出力になる。
    - temperature = 1.0〜2.0
	    - 非常にランダム。創造性が高まるが、文の意味が不安定になりやすい。
- ChatGPTにおける利用方法
	- 設定自体はできないが、プロンプトで含めると変更してくれる
		- `temperatureを0.0に設定してください。`
		- `temperatureを2.0に設定してください。`

### top_p
- 概要
	- 各サンプリングを指定する
	- 各サンプリング選択肢を制御する
		- 出力されるトークンの確率分布から、トークンを選択する再に累進確率の閾値を指定する
- 値の意味
	- top_p = 1.0
		- 全ての候補から選択する
		- ランダム度が高い
    - top_p = 0.75
	    - 上位の75%の確率に収まる候補から選択する
    - top_p = 0.1
	    - 上位10%の確率に収まる候補から選択する
	    - 非常に限定的。かなり保守的な出力になる